Модуль fwall Устанавливает правила iptables в заданное состояние.
Состояние правил берется из скрипта, который хранится на сервере puppet в папке ..modules/fwall/files/
В этом скрипте происходит очистка всех правил iptables и создание новых правил.
Если содержимое файла(скрипт, создающий правила) на агенте отличается от содержимого на сервере, то на агенте файл переписывается, и 
скрипт перезапускается командой bash, в итоге на агенте устанавливаются заданные правила iptables.

# Добавлено 11.05.2018

Правила iptables переписываются из файла КАЖДЫЙ раз, при обращении puppet-сервера.
А "по уму" надо бы это делать, только если есть разница между файлами. Это ж сделано для "grid-mapfile" у HTCondorCE
